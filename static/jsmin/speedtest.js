function unfade(e){let t=.1;e.style.display="block";const n=setInterval(()=>{t>=1&&clearInterval(n),e.style.opacity=t,e.style.filter=`alpha(opacity=${100*t})`,t+=.1*t},10)}function fade(e){let t=.1;e.style.display="block";const n=setInterval(()=>{parseInt(t)<=0&&(clearInterval(n),e.style.display="none"),e.style.opacity=t,e.style.filter=`alpha(opacity=${100*t})`,t-=.1*t},15)}function show_ans(e,t){const n=document.getElementById(t);"none"==n.style.display?unfade(n):fade(n)}window.type_data={download:50,upload:20};const infost=document.getElementById("info-st");infost.onclick=(()=>{show_ans(this,"spdinfo")});const start_btn=document.getElementById("start_btn");start_btn.onclick=(()=>{show_ans(this,"testarea"),dl_req(),ul_req()});const avg_dl=document.getElementById("avg_dl"),avg_ul=document.getElementById("avg_ul"),check_performance=(e,t,n,o="download")=>{let a="MB";const l=window.type_data[o],s=t-e;console.log(l,s);let d=l/(s/1e3);d<=.001&&(a="KB",d*=1024),n.innerHTML=`speed:${d.toFixed(3)} ${a}/sec`,n.style.display="block"},dl_req=async()=>{const e=new XMLHttpRequest;e.open("GET","/s/generate-file/"),e.setRequestHeader("X-Filesize","max"),e.onload=(e=>{check_performance(window.dl_start,performance.now(),avg_dl)}),e.onprogress=(e=>{let t=e.loaded/1048576/((performance.now()-window.dl_start)/1e3),n="MB";t<=.001&&(n="KB",t*=1024),avg_dl.style.display="block",avg_dl.innerHTML=`${t.toFixed(2)}  ${n}/sec`}),window.dl_start=performance.now(),e.send()},ul_req=async()=>{avg_ul.innerHTML="Checking Upload Speed";const e=new ArrayBuffer(5242880),t=performance.now();await Promise.all([((e,t,n)=>{const o=[];for(let a=0;a<n;a++)o.push(e(...t)),console.log("Number:",a);return o})(async(e,t)=>{const n=new XMLHttpRequest;n.open("POST",e),n.send(t)},["/s/uploads/",e],4)]);check_performance(t,performance.now(),avg_ul,"upload")};