function unfade(e){let t=.1;e.style.display="block";const n=setInterval(()=>{t>=1&&clearInterval(n),e.style.opacity=t,e.style.filter=`alpha(opacity=${100*t})`,t+=.1*t},10)}function fade(e){let t=.1;e.style.display="block";const n=setInterval(()=>{parseInt(t)<=0&&(clearInterval(n),e.style.display="none"),e.style.opacity=t,e.style.filter=`alpha(opacity=${100*t})`,t-=.1*t},15)}function show_ans(e,t){const n=document.getElementById(t);"none"==n.style.display?unfade(n):fade(n)}window.type_data={download:50,upload:20};const infost=document.getElementById("info-st");infost.onclick=(()=>{show_ans(this,"spdinfo")});const start_btn=document.getElementById("start_btn");start_btn.onclick=(()=>{show_ans(this,"testarea"),start_btn.innerHTML="Working On It",start_btn.onclick=(()=>{}),dl_req().then(e=>{console.log("DL_REQ"),ul_req()}).then(e=>{start_btn.innerHTML="Final Results"})});const avg_dl=document.getElementById("avg_dl"),avg_ul=document.getElementById("avg_ul"),check_performance=(e,t,n,o="download")=>{let l="MB";const a=window.type_data[o],s=t-e;console.log(a,s,o);let d=a/(s/1e3);d<=.001&&(l="KB",d*=1024),n.innerHTML=`speed:${d.toFixed(3)} ${l}/sec`,n.style.display="block"},dl_req=()=>new Promise((e,t)=>{avg_ul.innerHTML="Upload will begin after the download",avg_ul.style.display="block",fetch("/s/generate-file/").then(e=>e.text()).then(t=>{const n=new XMLHttpRequest;n.open("GET",t),n.setRequestHeader("X-Filesize","max"),n.onload=(t=>{console.log(t),e(check_performance(window.dl_start,performance.now(),avg_dl))}),n.onprogress=(e=>{let t=e.loaded/1048576/((performance.now()-window.dl_start)/1e3),n="MB";t<=.001&&(n="KB",t*=1024),avg_dl.style.display="block",avg_dl.innerHTML=`${t.toFixed(2)}  ${n}/sec`}),window.dl_start=performance.now(),n.send()})}),blobgen=e=>new ArrayBuffer(e),ul_req=async()=>{const e=blobgen(20971520);return avg_ul.innerHTML="Checking Upload Speed",console.log(e),await(async(e,t)=>{const n=performance.now();fetch(e,{method:"POST",body:t}).then(e=>check_performance(n,performance.now(),avg_ul,"upload"))})("/s/uploads/",e),"Done"};