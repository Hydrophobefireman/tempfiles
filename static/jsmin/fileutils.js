function abs_url(e){let t=document.createElement("a");return t.href=e,t.href}function progress(e,t,n){const o=t/e*100;o>=100&&(document.getElementById("filact").innerText="complete"),document.getElementById("rdf").style.display="block",document.getElementById("filact").innerText=`${n} file`,document.getElementById("progress-div").style.width=`${o}%`}async function upload(e){console.log(e);const t=e.target.files[0],n=new XMLHttpRequest;n.open("POST","/upload/"),n.upload.onprogress=(e=>{progress(e.total,e.loaded,"Uploading")}),n.setRequestHeader("X-File-Name",t.name),n.onload=async function(){document.getElementById("filact").innerText="Complete";const e=JSON.parse(this.response),t=(e.nonce,e.file),n=`/dl/${t}`;window.history.pushState({},document.title,t),document.getElementById("xrhf").style.display="block";const o=document.getElementById("file-url"),l=document.getElementById("file-url_helper");var d;document.getElementById("fname").innerHTML=t,o.value=abs_url(n),o.onclick=(()=>{d=l,o.select(),document.execCommand("copy"),d&&(d.innerHTML="copied")})},n.send(t)}